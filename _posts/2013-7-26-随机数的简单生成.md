---
layout: post
category: 臭蛋
tags: 随机数 
---

### 随机数

在C语言中产生随机数都是使用rand()函数，若还想每次都生成不一样的随机数序列，我们会考虑每次使用不同的seed来生成，最常用的方式则是使用系统的time来产生不一样的种子。

> srand(time(NULL));
> rand();

最近在StackOverFlow上看到一个有意思的提问，[如何不使用外部函数来生成随机数](http://stackoverflow.com/questions/15038174/generate-random-numbers-without-using-any-external-functions)，意思是自己实现一个随机数生成函数，StackOverFlow遍布神人，有个大神给出了全面又不失细致的答案，对于理解随机数很有帮助。故记录下来。

典型产生一个新的伪随机数的方式都是基于之前的那个伪随机数，所以理论上这个新的随机数是确定的。大神说`The onely randomness is guranteed by providing a good sedd!`。只要不是非常重于安全的考虑，都可以用这种递归的思想去产生随机数。如果提供了seed,有较多的好方法去生成随机数，大神给出了个例子`[Linear Congruential Generator](https://en.wikipedia.org/wiki/Linear_congruential_generator) 线性同余发生器`。

### 代码

基于前面描述的思想，大神给出了一个简单的方法来生成随机数。

    long a = 25214903917; // a 和 c 的值是在java.util.Random()中真实找到的值。 
    long c = 11;
    long previous = 0;

    void rseed(long seed){
        previous = seed;
    }

    long rand(){
        long r = a*previous + c; //一般只选择该值的几位
        previous = r;
        return r;
    }

同样，我们需要一些初始值来赋值给seed,以产生较好的随机序列，可以通过如下几种方式：

* 使用像当前时间这样的数字，time(NULL),大部分情况都是不错的选择，但严格安全的场景不适用
* 使用硬件噪音，可以保证安全性
* 使用常量数，可以方便调试，每次都产生同样的随机序列 
* 如果不能使用外部方法，又不愿使用常量，如果使用的编程语言允许，可以使用未初始化的内存，在c和c++中，定义一个变量，不赋值，然乎直接使用它的值来做为seed,大神建议不要在实际代码中使用`Only a hack to fulfill your requirements`！

没有一个算法能使用同样的种子在程序每次运行时而产生不同的序列，这说明，要想产生不同的序列，必须提供不同的种子，可以通过访问外部资源，例如系统环境来做为种子，进而产生较好的随机数。

### 总结

网上搜了下[线性同余发生器的介绍](http://blog.csdn.net/jinling1441/article/details/4985515)，也是一个伪随机序列发生器，不同使用在密码学中，因为产生的随机数其实是可预测的。StackOverFlow上大神真多，往往能够给出一个简炼的答案，让你豁然开朗！不得不佩服国外的大神，严谨认真，都大神了还孳孳不倦的在StackOverFlow为大家排忧解难，奉献世界！

